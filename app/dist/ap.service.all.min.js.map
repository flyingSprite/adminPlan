{"version":3,"sources":["ap.service.all.min.js"],"names":["define","adminApp","config","factory","$http","defaults","useXDomain","serverUrl","serverHost","namespace","method","toUpperCase","url","headers","Content-Type","data","service","adminHttp","o","options","success","error","res","err","this","count","hotnews","lastTenCpuMonitor","missionList","missions","missionAdd","mission","missionUpdate","missionDelete","id","label","get","categoryId","post","delete","category","doc","getSubject","getSubjectById","subjectId","postSubject","subject","deleteSubject","getTitle","postTitle","title","deleteTitle","titleId","getContent","postContent","content","putContent","require","info","args","console","log","warn","send","type","message","$","notify","autoHide","autoHideDelay","self","supportNotification","window","Notification","permission","requestPermission","notice","isNull","obj","undefined","generateUid","d","Date","getTime","uuid","replace","c","r","Math","random","floor","toString","next","source","from","angular","forEach","push","i","length","splice","regexpIpv4","regexpIpv4Netmask","regexpIpv4Port","validates","ipv4","value","test","ipv4-netmask","ipv4-port","ipv6","ipv6-netmask","email","command"],"mappings":"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","file":"ap.service.all.min.js","sourcesContent":["\n/** All server api will define in here. */\ndefine('api', ['adminApp', 'config'], function (adminApp, config) {\n  adminApp\n  .factory('adminHttp', ['$http', function ($http){\n    $http.defaults.useXDomain = true;\n    var serverUrl = config.serverHost + config.namespace;\n    // var serverUrl = 'http://www.duastone.com/solutions';\n    return function (config){\n      if(config.method.toUpperCase() == 'POST'\n        || config.method.toUpperCase() == 'PUT'\n        || config.method.toUpperCase() == 'DELETE') {\n        return $http({\n          url: serverUrl + config.url,\n          method: config.method.toUpperCase(),\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          // transformRequest : function(data){\n          //   if (data === undefined) {\n          //     return data;\n          //   }\n          //   return $.param(data);\n          // },\n          data: config.data\n        });\n      } else if (config.method.toUpperCase() == 'GET') {\n        return $http({\n          url: serverUrl + config.url,\n          method: 'GET',\n          data: config.data\n        });\n      }\n    };\n  }])\n  .service('api', ['adminHttp', function (adminHttp) {\n\n    var o = function(options, success, error) {\n      adminHttp(options)\n      .success(function(res){\n        res && success && success(res);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n    /** Get count for dashboard. */\n    this.count = function(success, error) {\n      adminHttp({method: 'GET', url: '/dashboard/count'})\n      .success(function(count){\n        count && success && success(count);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.hotnews = function(success, error) {\n      adminHttp({method: 'GET', url: '/hotnews'})\n      .success(function(hotnews) {\n        hotnews && success && success(hotnews);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.lastTenCpuMonitor = function(success, error) {\n      adminHttp({method: 'GET', url: '/cms'})\n      .success(function(hotnews) {\n        hotnews && success && success(hotnews);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.missionList = function(success, error) {\n      adminHttp({method: 'GET', url: '/mission'})\n      .success(function(missions) {\n        missions && success && success(missions);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.missionAdd = function(mission, success, error) {\n      adminHttp({method: 'POST', url: '/mission', data: mission})\n      .success(function(missions) {\n        missions && success && success(missions);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.missionUpdate = function(mission, success, error) {\n      adminHttp({method: 'PUT', url: '/mission', data: mission})\n      .success(function(missions) {\n        missions && success && success(missions);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.missionDelete = function(id, success, error) {\n      adminHttp({method: 'DELETE', url: '/mission', data: {id: id}})\n      .success(function(res) {\n        res && success && success(res);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.label = {\n      get: function(categoryId, success, error) {\n        o({method: 'GET', url: '/label?categoryId=' + categoryId}, success, error);\n      },\n      post: function(label, success, error) {\n        o({method: 'POST', url: '/label', data: label}, success, error);\n      },\n      delete: function(id, success, error) {\n        o({method: 'DELETE', url: '/label', data: {id: id}}, success, error);\n      }\n    };\n\n    this.category = {\n      get: function(success, error) {\n        o({method: 'GET', url: '/category'}, success, error);\n      },\n      post: function(category, success, error) {\n        o({method: 'POST', url: '/category', data: category}, success, error);\n      },\n      delete: function(id, success, error) {\n        o({method: 'DELETE', url: '/category', data: {id: id}}, success, error);\n      }\n    };\n\n    // Doc System interface api.\n    this.doc = {\n      getSubject: function(success, error) {\n        o({method: 'GET', url: '/doc/subject'}, success, error);\n      },\n      getSubjectById: function(subjectId, success, error) {\n        o({method: 'GET', url: '/doc/subject/id?subjectId=' + subjectId}, success, error);\n      },\n      postSubject: function(subject, success, error) {\n        o({method: 'POST', url: '/doc/subject', data: subject}, success, error);\n      },\n      deleteSubject: function(subjectId, success, error) {\n        o({method: 'DELETE', url: '/doc/subject', data: {id: subjectId}}, success, error);\n      },\n      getTitle: function(subjectId, success, error) {\n        o({method: 'GET', url: '/doc/title?subjectId=' + subjectId}, success, error);\n      },\n      postTitle: function(title, success, error) {\n        o({method: 'POST', url: '/doc/title', data: title}, success, error);\n      },\n      deleteTitle: function(titleId, success, error) {\n        o({method: 'DELETE', url: '/doc/title', data: {id: titleId}}, success, error);\n      },\n      getContent: function(titleId, success, error) {\n        o({method: 'GET', url: '/doc/content?titleId=' + titleId}, success, error);\n      },\n      postContent: function(content, success, error) {\n        o({method: 'POST', url: '/doc/content', data: content}, success, error);\n      },\n      putContent: function(content, success, error) {\n        o({method: 'PUT', url: '/doc/content', data: content}, success, error);\n      },\n    };\n\n  }]);\n});\n\n\n/**\n * Define a server use low wrap:\n * define('serviceName', ['a', 'b', 'c'], function () {});\n * then add like below:\n * require(['serviceName']);\n */\nrequire([\n  'initService',\n  'api',\n  'notification-service',\n  'message-box',\n  'util',\n  'validator'\n]);\n\ndefine('initService', ['adminApp'], function (adminApp) {\n\n\n  adminApp.service('InitService', ['$http', function ($http){\n    this.config = function () {\n      return $http({method: 'GET', url: '/config.json'});\n    };\n  }]);\n  adminApp.service('logging', function(){\n    this.info = function(args) {\n      console.log(args);\n    };\n\n    this.warn = function(args) {\n      console.warn(args);\n    };\n\n    this.err = function(args) {\n      console.err(args);\n    };\n  });\n  adminApp.service('socket', [ '$http', 'logging', function ($http) {\n    $http.defaults.useXDomain = true;\n    // var socket = new WebSocket('ws://localhost:8080/solutions/point');\n    // var self = this;\n    // var temporyList = [];\n    // socket.onopen = function (){\n\n    //   self.connectSuccess = true;\n    //   angular.forEach(temporyList, function(value){\n    //     socket.send(value);\n    //   });\n    //   temporyList.length = 0;\n    // }\n\n    // socket.onmessage = function(event){\n    //   logging.info(event.data);\n    // }\n\n    // $http({\n    //     url: 'http://localhost:8080/solutions/record',\n    //     method: 'GET'\n    //   }).then(function (data){\n    //     console.log(\"====>\", data);\n    //   }).then(function (err){\n    //     console.log(err);\n    //   });\n\n\n\n    this.send = function () {\n      // if(self.connectSuccess){\n      //   socket.send(data);\n      // } else {\n      //   temporyList.push(data);\n      //   logging.warn(\"Web Socket is connecting ... \");\n      // }\n    };\n\n  }]);\n\n});\n\n\n/** Show message box. */\ndefine('message-box', ['adminApp'], function (adminApp) {\n\n  adminApp\n  .factory('messageBox', [function () {\n\n    // More detail see https://notifyjs.com/\n    // type: success, info, warn, error\n    return function(type, message) {\n      $.notify.defaults({\n        autoHide: true,\n        autoHideDelay: 2000\n      });\n      $.notify(message, type);\n    };\n  }]);\n});\ndefine('notification-service', ['adminApp'], function (adminApp) {\n  adminApp.service('notification', function () {\n    var self = this;\n    self.supportNotification = false;\n    if (!('Notification' in window)) {\n      self.supportNotification = false;\n    }\n    // Let's check whether notification permissions have already been granted\n    else if (Notification.permission === 'granted') {\n      self.supportNotification = true;\n    }\n    // Otherwise, we need to ask the user for permission\n    else if (Notification.permission !== 'denied') {\n      Notification.requestPermission(function (permission) {\n        // If the user accepts, let's create a notification\n        if (permission === 'granted') {\n          self.supportNotification = true;\n        }\n      });\n    }\n\n    self.notice = function(message) {\n      if (self.supportNotification) {\n        new Notification(message);\n      }\n    };\n  });\n});\n\n/** Util service. */\ndefine('util', ['adminApp'], function (adminApp) {\n\n  adminApp\n  .service('util', function () {\n\n    /** Is undefined or '' */\n    this.isNull = function(obj) {\n      return obj === undefined || obj === '';\n    };\n  })\n  .factory('GenerateUniqueId', function() {\n    var generateUid = function() {\n      // http://www.ietf.org/rfc/rfc4122.txt\n      var d = new Date().getTime();\n      var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = (d + Math.random()*16)%16 | 0;\n        d = Math.floor(d/16);\n        return (c === 'x' ? r : (r&0x7|0x8)).toString(16);\n      });\n      return uuid;\n    };\n    return {\n      next: function() { return generateUid(); }\n    };\n  })\n  .factory('copyArray', function () {\n    return function(source, from) {\n      angular.forEach(from, function(o) {\n        this.push(o);\n      }, source);\n    };\n  })\n  .factory('removeArrayById', [function () {\n    return function(source, o) {\n      for (var i = source.length - 1; i >= 0; i --) {\n        if (source[i].id === o.id) {\n          source.splice(i, 1);\n        }\n      }\n    };\n  }]);\n});\n\n/** Util service. */\ndefine('validator', ['adminApp'], function (adminApp) {\n\n  adminApp.factory('validator', function () {\n    var regexpIpv4 = /^((?:2[0-5]{2}|1\\d{2}|[1-9]\\d|[1-9])\\.(?:(?:2[0-5]{2}|1\\d{2}|[1-9]\\d|\\d)\\.){2}(?:2[0-5]{2}|1\\d{2}|[1-9]\\d|\\d))$/;\n    var regexpIpv4Netmask = /^((?:2[0-5]{2}|1\\d{2}|[1-9]\\d|[1-9])\\.(?:(?:2[0-5]{2}|1\\d{2}|[1-9]\\d|\\d)\\.){2}(?:2[0-5]{2}|1\\d{2}|[1-9]\\d|\\d)\\/(\\d|[1-2]\\d|3[0-2]))$/;\n    var regexpIpv4Port = /^((?:2[0-5]{2}|1\\d{2}|[1-9]\\d|[1-9])\\.(?:(?:2[0-5]{2}|1\\d{2}|[1-9]\\d|\\d)\\.){2}(?:2[0-5]{2}|1\\d{2}|[1-9]\\d|\\d)):(\\d|[1-9]\\d|[1-9]\\d{2,3}|[1-5]\\d{4}|6[0-4]\\d{3}|654\\d{2}|655[0-2]\\d|6553[0-5])$/;\n\n    var validates = {\n      ipv4: function(value) {\n        return regexpIpv4.test(value);\n      },\n      'ipv4-netmask': function(value) {\n        return regexpIpv4Netmask.test(value);\n      },\n      'ipv4-port': function(value) {\n        return regexpIpv4Port.test(value);\n      },\n      ipv6: function(value) {\n        return !!value;\n      },\n      'ipv6-netmask': function(value) {\n        return !!value;\n      },\n      email: function(value) {\n        return !!value;\n      }\n    };\n    return function(command, value) {\n      if (command && validates[command]) {\n        return validates[command](value);\n      }\n      return false;\n    };\n  });\n});\n"]}