{"version":3,"sources":["ap.service.all.min.js"],"names":["define","adminApp","service","adminHttp","o","options","success","error","res","err","this","count","method","url","hotnews","lastTenCpuMonitor","missionList","missions","missionAdd","mission","data","missionUpdate","missionDelete","id","label","get","categoryId","post","delete","category","doc","getSubject","getSubjectById","subjectId","postSubject","subject","deleteSubject","getTitle","postTitle","title","deleteTitle","titleId","getContent","postContent","content","putContent","require","config","marked","$http","info","args","console","log","warn","directive","restrict","replace","scope","markurl","markData","template","controller","$scope","$sce","setOptions","highlight","code","hljs","highlightAuto","value","undefined","markdownHtml","trustAsHtml","$watch","factory","defaults","useXDomain","serverUrl","serverHost","namespace","toUpperCase","headers","Content-Type","send","type","message","$","notify","autoHide","autoHideDelay","self","supportNotification","window","Notification","permission","requestPermission","notice","isNull","obj","generateUid","d","Date","getTime","uuid","c","r","Math","random","floor","toString","next","source","from","angular","forEach","push","i","length","splice"],"mappings":"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","file":"ap.service.all.min.js","sourcesContent":["\n/** All server api will define in here. */\ndefine('api', ['adminApp'], function (adminApp) {\n  adminApp.service('api', ['adminHttp', function (adminHttp) {\n\n    var o = function(options, success, error) {\n      adminHttp(options)\n      .success(function(res){\n        res && success && success(res);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n    /** Get count for dashboard. */\n    this.count = function(success, error) {\n      adminHttp({method: 'GET', url: '/dashboard/count'})\n      .success(function(count){\n        count && success && success(count);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.hotnews = function(success, error) {\n      adminHttp({method: 'GET', url: '/hotnews'})\n      .success(function(hotnews) {\n        hotnews && success && success(hotnews);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.lastTenCpuMonitor = function(success, error) {\n      adminHttp({method: 'GET', url: '/cms'})\n      .success(function(hotnews) {\n        hotnews && success && success(hotnews);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.missionList = function(success, error) {\n      adminHttp({method: 'GET', url: '/mission'})\n      .success(function(missions) {\n        missions && success && success(missions);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.missionAdd = function(mission, success, error) {\n      adminHttp({method: 'POST', url: '/mission', data: mission})\n      .success(function(missions) {\n        missions && success && success(missions);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.missionUpdate = function(mission, success, error) {\n      adminHttp({method: 'PUT', url: '/mission', data: mission})\n      .success(function(missions) {\n        missions && success && success(missions);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.missionDelete = function(id, success, error) {\n      adminHttp({method: 'DELETE', url: '/mission', data: {id: id}})\n      .success(function(res) {\n        res && success && success(res);\n      })\n      .error(function(err) {\n        err && error && error(err);\n      });\n    };\n\n    this.label = {\n      get: function(categoryId, success, error) {\n        o({method: 'GET', url: '/label?categoryId=' + categoryId}, success, error);\n      },\n      post: function(label, success, error) {\n        o({method: 'POST', url: '/label', data: label}, success, error);\n      },\n      delete: function(id, success, error) {\n        o({method: 'DELETE', url: '/label', data: {id: id}}, success, error);\n      }\n    };\n\n    this.category = {\n      get: function(success, error) {\n        o({method: 'GET', url: '/category'}, success, error);\n      },\n      post: function(category, success, error) {\n        o({method: 'POST', url: '/category', data: category}, success, error);\n      },\n      delete: function(id, success, error) {\n        o({method: 'DELETE', url: '/category', data: {id: id}}, success, error);\n      }\n    };\n\n    // Doc System interface api.\n    this.doc = {\n      getSubject: function(success, error) {\n        o({method: 'GET', url: '/doc/subject'}, success, error);\n      },\n      getSubjectById: function(subjectId, success, error) {\n        o({method: 'GET', url: '/doc/subject/id?subjectId=' + subjectId}, success, error);\n      },\n      postSubject: function(subject, success, error) {\n        o({method: 'POST', url: '/doc/subject', data: subject}, success, error);\n      },\n      deleteSubject: function(subjectId, success, error) {\n        o({method: 'DELETE', url: '/doc/subject', data: {id: subjectId}}, success, error);\n      },\n      getTitle: function(subjectId, success, error) {\n        o({method: 'GET', url: '/doc/title?subjectId=' + subjectId}, success, error);\n      },\n      postTitle: function(title, success, error) {\n        o({method: 'POST', url: '/doc/title', data: title}, success, error);\n      },\n      deleteTitle: function(titleId, success, error) {\n        o({method: 'DELETE', url: '/doc/title', data: {id: titleId}}, success, error);\n      },\n      getContent: function(titleId, success, error) {\n        o({method: 'GET', url: '/doc/content?titleId=' + titleId}, success, error);\n      },\n      postContent: function(content, success, error) {\n        o({method: 'POST', url: '/doc/content', data: content}, success, error);\n      },\n      putContent: function(content, success, error) {\n        o({method: 'PUT', url: '/doc/content', data: content}, success, error);\n      },\n    };\n\n  }]);\n});\n\n/**\n * Define a server use low wrap:\n * define('serviceName', ['a', 'b', 'c'], function () {});\n * then add like below:\n * require(['serviceName']);\n */\nrequire([\n  'initService',\n  'api',\n  'notification-service',\n  'message-box',\n  'util'\n]);\n\ndefine('initService', ['adminApp', 'config', 'marked', 'angular', 'angular-ui-router'], function (adminApp, config, marked) {\n\n  adminApp.service('InitService', function ($http){\n    this.config = function () {\n      return $http({method: 'GET', url: '/config.json'});\n    };\n  })\n  .service('logging', function(){\n    this.info = function(args) {\n      console.log(args);\n    };\n\n    this.warn = function(args) {\n      console.warn(args);\n    };\n\n    this.err = function(args) {\n      console.err(args);\n    };\n  })\n  .directive('markd', function () {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        markurl: '@',\n        markData: '@'\n      },\n      template: '<div ng-bind-html=\"markdownHtml\"></div>',\n      controller: ['$scope', '$sce', '$http', function ($scope, $sce, $http) {\n        marked.setOptions({\n          highlight: function (code) {\n            return hljs.highlightAuto(code).value;\n          }\n        });\n        if ($scope.markData != undefined) {\n          $scope.markdownHtml = $sce.trustAsHtml(marked($scope.markData));\n          $scope.$watch(function () {\n            return $scope.markData;\n          }, function () {\n            $scope.markdownHtml = $sce.trustAsHtml(marked($scope.markData));\n          });\n        }\n\n        if($scope.markData == undefined || $scope.markurl != undefined){\n          $http.get($scope.markurl)\n            .success(function(data) {\n              $scope.markdownHtml = $sce.trustAsHtml(marked(data));\n            });\n        }\n      }]\n    };\n  })\n  .factory('adminHttp', ['$http', function ($http){\n    $http.defaults.useXDomain = true;\n    var serverUrl = config.serverHost + config.namespace;\n    // var serverUrl = 'http://www.duastone.com/solutions';\n    return function (config){\n      if(config.method.toUpperCase() == 'POST'\n        || config.method.toUpperCase() == 'PUT'\n        || config.method.toUpperCase() == 'DELETE') {\n        return $http({\n          url: serverUrl + config.url,\n          method: config.method.toUpperCase(),\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          // transformRequest : function(data){\n          //   if (data === undefined) {\n          //     return data;\n          //   }\n          //   return $.param(data);\n          // },\n          data: config.data\n        });\n      } else if (config.method.toUpperCase() == 'GET') {\n        return $http({\n          url: serverUrl + config.url,\n          method: 'GET',\n          data: config.data\n        });\n      }\n    };\n  }])\n  .service('socket', [ '$http', 'logging', function ($http) {\n    $http.defaults.useXDomain = true;\n    // var socket = new WebSocket('ws://localhost:8080/solutions/point');\n    // var self = this;\n    // var temporyList = [];\n    // socket.onopen = function (){\n\n    //   self.connectSuccess = true;\n    //   angular.forEach(temporyList, function(value){\n    //     socket.send(value);\n    //   });\n    //   temporyList.length = 0;\n    // }\n\n    // socket.onmessage = function(event){\n    //   logging.info(event.data);\n    // }\n\n    // $http({\n    //     url: 'http://localhost:8080/solutions/record',\n    //     method: 'GET'\n    //   }).then(function (data){\n    //     console.log(\"====>\", data);\n    //   }).then(function (err){\n    //     console.log(err);\n    //   });\n\n\n\n    this.send = function () {\n      // if(self.connectSuccess){\n      //   socket.send(data);\n      // } else {\n      //   temporyList.push(data);\n      //   logging.warn(\"Web Socket is connecting ... \");\n      // }\n    };\n\n  }]);\n\n});\n\n\n/** Show message box. */\ndefine('message-box', ['adminApp'], function (adminApp) {\n\n  adminApp\n  .factory('messageBox', [function () {\n\n    // More detail see https://notifyjs.com/\n    // type: success, info, warn, error\n    return function(type, message) {\n      $.notify.defaults({\n        autoHide: true,\n        autoHideDelay: 2000\n      });\n      $.notify(message, type);\n    };\n  }]);\n});\ndefine('notification-service', ['adminApp'], function (adminApp) {\n  adminApp.service('notification', function () {\n    var self = this;\n    self.supportNotification = false;\n    if (!('Notification' in window)) {\n      self.supportNotification = false;\n    }\n    // Let's check whether notification permissions have already been granted\n    else if (Notification.permission === 'granted') {\n      self.supportNotification = true;\n    }\n    // Otherwise, we need to ask the user for permission\n    else if (Notification.permission !== 'denied') {\n      Notification.requestPermission(function (permission) {\n        // If the user accepts, let's create a notification\n        if (permission === 'granted') {\n          self.supportNotification = true;\n        }\n      });\n    }\n\n    self.notice = function(message) {\n      if (self.supportNotification) {\n        new Notification(message);\n      }\n    };\n  });\n});\n\n/** Util service. */\ndefine('util', ['adminApp'], function (adminApp) {\n\n  adminApp\n  .service('util', function () {\n\n    /** Is undefined or '' */\n    this.isNull = function(obj) {\n      return obj === undefined || obj === '';\n    };\n  })\n  .factory('GenerateUniqueId', function() {\n    var generateUid = function() {\n      // http://www.ietf.org/rfc/rfc4122.txt\n      var d = new Date().getTime();\n      var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = (d + Math.random()*16)%16 | 0;\n        d = Math.floor(d/16);\n        return (c === 'x' ? r : (r&0x7|0x8)).toString(16);\n      });\n      return uuid;\n    };\n    return {\n      next: function() { return generateUid(); }\n    };\n  })\n  .factory('copyArray', function () {\n    return function(source, from) {\n      angular.forEach(from, function(o) {\n        this.push(o);\n      }, source);\n    };\n  })\n  .factory('removeArrayById', [function () {\n    return function(source, o) {\n      for (var i = source.length - 1; i >= 0; i --) {\n        if (source[i].id === o.id) {\n          source.splice(i, 1);\n        }\n      }\n    };\n  }]);\n});"],"sourceRoot":"/source/"}