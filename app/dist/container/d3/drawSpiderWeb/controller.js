define(["adminApp","d3"],function(r,t){r.controller("D3DrawSpiderWebController",function(r,e){function a(r,t,e){for(var a=r.branchs,n=r.nodes,o=[],s=0;e>s;s++)for(var p=0;t>p;p++){var h=0===s?{x:0,y:0}:n[s-1][p],l=n[s][p],c=i(h,l);o.push(c)}for(var d=n[n.length-1],p=0;t>p;p++){var h=d[p],l=a[p],c=i(h,l);o.push(c)}}function n(r){for(var t=r.nodes,e=[],a=0;a<t.length;a++){for(var n=t[a],o=n[0],s=!0,p=0;p<n.length;p++){var h=n[p];if(s)s=!1;else{var l=i(o,h);o=h,e.push(l)}}var l=i(n[0],n[n.length-1])}}function o(r){for(var t=r.nodes,e=[],a=0;a<t.length;a++)e=e.concat(t[a]);for(var n=[],a=0;a<e.length;a++){var o=s(e[a]);n.push(o)}}function s(r){var t={positition:r,point:v.append("circle").attr("class","node-dashednet").attr("cx",r.x).attr("cy",r.y).attr("r",5)};return t}function i(r,t){var e={one:r,two:t,path:v.append("polyline").attr("points",[[r.x,r.y],[t.x,t.y]])};return e}function p(r,t,e,a,n){for(var o={center:{x:0,y:0},branchs:[],nodes:[]},s=0;r>s;s++){var i=2*Math.PI/r*s,p={x:t*Math.cos(i),y:t*Math.sin(i)};o.branchs.push(p)}for(var s=0;n>s;s++){for(var h=[],l=a*s+e,c=0;r>c;c++){var i=2*Math.PI/r*c,d={x:l*Math.cos(i),y:l*Math.sin(i)};h.push(d)}o.nodes.push(h)}return o}e.title="D3",e.subTitle="Draw Spider Web";var h=this;h.title="Draw Spider Web",h.markTemplate="marks/d3/drawSpiderWeb.md",h.info="使用d3绘制一个虚拟的蜘蛛网";var l=t.select("#d3select").append("svg").style("width","100%").style("height","100%").style("color","#777"),c=parseInt(l.style("width").replace("px","")),d=parseInt(l.style("height").replace("px","")),v=l.append("g").attr("transform","translate("+c/2+", "+d/2+")"),f=12,u=d/2,y=40,g=30,x=(u-y)/g,b=p(f,u,y,g,x);a(b,f,x),n(b),o(b)})});